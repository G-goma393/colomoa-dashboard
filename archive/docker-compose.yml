services:
  app:
    # 開発用なのでNodeのイメージを直接使用
    image: node:20-alpine
    working_dir: /app

    # 依存関係をインストールしてから開発サーバーを起動
    command: sh -c "npm install && npm run dev"

    ports:
      - "8080:8080" # Viteの設定に合わせて8080同士を接続

    volumes:
      - .:/app # 手元のフォルダをコンテナ内の/appに同期
      - /app/node_modules # node_modulesはコンテナ内のものを使用（ホスト側と混ざらないように除外）

    container_name: colomoa-dashboard
    restart: always
